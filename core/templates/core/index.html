{% extends "core/base.html" %}

{% block content %}

<!-- Banner Slideshow -->
<div class="container mt-4">
  <div id="bannerCarousel" class="carousel slide position-relative overflow-hidden rounded-3 shadow-sm" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for b in banners %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="{{ b.image.url }}" alt="{{ b.title }}" 
             class="d-block w-100" style="object-fit: cover; height: 400px;">
        <div class="position-absolute top-50 start-50 translate-middle text-white text-center px-3">
          <h1 class="display-4 fw-bold text-shadow">{{ b.title }}</h1>
          {% if b.subtitle %}
            <p class="lead text-shadow">{{ b.subtitle }}</p>
          {% endif %}
        </div>
      </div>
      {% empty %}
      <div class="carousel-item active">
        <img src="https://picsum.photos/1200/400" class="d-block w-100" style="object-fit: cover; height: 400px;">
        <div class="position-absolute top-50 start-50 translate-middle text-white text-center px-3">
          <h1 class="display-4 fw-bold text-shadow">Welcome to FlipCart</h1>
          <p class="lead text-shadow">Discover products from trusted vendors across Bangladesh.</p>
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
</div>

<!-- Popular Categories -->
<div class="container mt-5">
  <h3 class="mb-4 fw-bold">Popular Categories</h3>
  <div class="row g-3">
    {% for cat in popular_categories %}
    <div class="col-6 col-md-3 col-lg-2">
      <div class="card text-center shadow-sm rounded-3">
        <!-- Clickable category image -->
        <a href="{% url 'core:search' %}?q={{ cat.name }}">
          <img src="{{ cat.image.url }}" class="card-img-top" alt="{{ cat.name }}" style="height: 120px; object-fit: cover;">
        </a>
        <div class="card-body p-2">
          <p class="card-title mb-0 fw-semibold">
            <a href="{% url 'core:search' %}?q={{ cat.name }}" class="text-decoration-none text-dark">
              {{ cat.name }}
            </a>
          </p>
        </div>
      </div>
    </div>
    {% empty %}
      <p>No popular categories available.</p>
    {% endfor %}
  </div>
</div>

<!-- Top Deals -->
<div class="container mt-5">
  <h3 class="mb-4 fw-bold">Top Deals</h3>
  <div class="row g-3">
    {% for p in top_deals %}
    <div class="col-6 col-md-3 col-lg-2">
      <div class="card text-center shadow-sm rounded-3 deal-card position-relative">
        <!-- Clickable image to product detail page -->
        <a href="{% url 'core:product_detail' p.id %}">
          <img src="{{ p.image.url }}" class="card-img-top" alt="{{ p.name }}" style="height: 180px; object-fit: cover;">
        </a>
        {% if p.old_price %}
        <span class="badge bg-danger position-absolute top-0 start-0 m-2">{{ p.discount_percentage }}% OFF</span>
        {% endif %}
        <div class="card-body p-2">
          <a href="{% url 'core:product_detail' p.id %}" class="text-decoration-none text-dark">
            <p class="card-title mb-1 fw-semibold">{{ p.name }}</p>
          </a>
          <p class="mb-0 fw-bold">৳{{ p.price }}</p>
          {% if p.old_price %}
            <del class="text-muted" style="font-size: 0.8rem;">৳{{ p.old_price }}</del>
          {% endif %}
        </div>
      </div>
    </div>
    {% empty %}
      <p>No top deals available.</p>
    {% endfor %}
  </div>
</div>

{% endblock %}























{% comment %} {% extends "core/base.html" %}

{% block content %}

<!-- Banner Slideshow -->
<div class="container mt-4">
  <div id="bannerCarousel" class="carousel slide position-relative overflow-hidden rounded-3 shadow-sm" data-bs-ride="carousel">
    <div class="carousel-inner">
      {% for b in banners %}
      <div class="carousel-item {% if forloop.first %}active{% endif %}">
        <img src="{{ b.image.url }}" alt="{{ b.title }}" 
             class="d-block w-100" style="object-fit: cover; height: 400px;">
        <div class="position-absolute top-50 start-50 translate-middle text-white text-center px-3">
          <h1 class="display-4 fw-bold text-shadow">{{ b.title }}</h1>
          {% if b.subtitle %}
            <p class="lead text-shadow">{{ b.subtitle }}</p>
          {% endif %}
        </div>
      </div>
      {% empty %}
      <div class="carousel-item active">
        <img src="https://picsum.photos/1200/400" class="d-block w-100" style="object-fit: cover; height: 400px;">
        <div class="position-absolute top-50 start-50 translate-middle text-white text-center px-3">
          <h1 class="display-4 fw-bold text-shadow">Welcome to FlipCart</h1>
          <p class="lead text-shadow">Discover products from trusted vendors across Bangladesh.</p>
        </div>
      </div>
      {% endfor %}
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#bannerCarousel" data-bs-slide="prev">
      <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#bannerCarousel" data-bs-slide="next">
      <span class="carousel-control-next-icon"></span>
    </button>
  </div>
</div>

<!-- Popular Categories -->
<div class="container mt-5">
  <h3 class="mb-4 fw-bold">Popular Categories</h3>
  <div class="row g-3">
    {% for cat in popular_categories %}
    <div class="col-6 col-md-3 col-lg-2">
      <div class="card text-center shadow-sm rounded-3">
        <!-- Clickable category image -->
        <a href="{% url 'core:search' %}?q={{ cat.name }}">
          <img src="{{ cat.image.url }}" class="card-img-top" alt="{{ cat.name }}" style="height: 120px; object-fit: cover;">
        </a>
        <div class="card-body p-2">
          <p class="card-title mb-0 fw-semibold">
            <a href="{% url 'core:search' %}?q={{ cat.name }}" class="text-decoration-none text-dark">
              {{ cat.name }}
            </a>
          </p>
        </div>
      </div>
    </div>
    {% empty %}
      <p>No popular categories available.</p>
    {% endfor %}
  </div>
</div>


<!-- Top Deals -->
<div class="container mt-5">
  <h3 class="mb-4 fw-bold">Top Deals</h3>
  <div class="row g-3">
    {% for p in top_deals %}
    <div class="col-6 col-md-3 col-lg-2">
      <div class="card text-center shadow-sm rounded-3 deal-card position-relative">
        <img src="{{ p.image.url }}" class="card-img-top" alt="{{ p.name }}" style="height: 180px; object-fit: cover;">
        {% if p.old_price %}
        <span class="badge bg-danger position-absolute top-0 start-0 m-2">{{ p.discount_percentage }}% OFF</span>
        {% endif %}
        <div class="card-body p-2">
          <p class="card-title mb-1 fw-semibold">{{ p.name }}</p>
          <p class="mb-0 fw-bold">৳{{ p.price }}</p>
          {% if p.old_price %}
            <del class="text-muted" style="font-size: 0.8rem;">৳{{ p.old_price }}</del>
          {% endif %}
        </div>
      </div>
    </div>
    {% empty %}
      <p>No top deals available.</p>
    {% endfor %}
  </div>
</div>

<a href="{% url 'core:product_detail' p.id %}">
    <img src="{{ p.image.url }}" class="card-img-top" alt="{{ p.name }}" style="height: 180px; object-fit: cover;">
</a>


{% endblock %} {% endcomment %}
